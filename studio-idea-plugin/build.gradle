buildscript {
    repositories {
        maven {
            url 'http://dl.bintray.com/jetbrains/intellij-plugin-service'
        }
    }
}

plugins {
    id "org.jetbrains.intellij" version "0.4.12"
}

group 'com.evolveum.midpoint.studio'
version '4.1-SNAPSHOT'

sourceCompatibility = javaVersion
targetCompatibility = javaVersion

tasks.withType(JavaCompile) { options.encoding = 'UTF-8' }

dependencies {
    compile project(':midpoint-client')

    compile("com.evolveum.midpoint.model:model-common:$midpointVersion") {
        transitive = false
    }
    compile("com.evolveum.midpoint.model:model-api:$midpointVersion") {
        transitive = false
    }
    compile("com.evolveum.midpoint.model:notifications-api:$midpointVersion") {
        transitive = false
    }
    compile "com.evolveum.midpoint:midpoint-localization:$midpointVersion"

    compile "de.slackspace:openkeepass:$openkeepass"
    compile "net.mikehardy:google-analytics-java7:$analyticsVersion"
    compile "org.apache.commons:commons-lang3:$commonsLang"
    compile "org.knowm.xchart:xchart:$xchartVersion"
    compile "com.h2database:h2:$h2Version"
//    compile "org.slf4j:slf4j-log4j12:1.7.25"
//    compile 'com.github.adedayo.intellij.sdk:forms_rt:142.1'
}

intellij {
    version '2019.3'
    type 'IC'
    downloadSources true
    pluginName 'MidPoint Studio'
    updateSinceUntilBuild false
    plugins = [
            'PsiViewer:193-SNAPSHOT',
            'java',
            'Groovy',
            'maven'
    ]
    patchPluginXml {
        sinceBuild '191'
        untilBuild '193.*'
    }
//    publishPlugin {
//        channels System.getenv('IJ_PLUGIN_REPO_CHANNEL')
//        token System.getenv('IJ_REPO_TOKEN')
//    }
}