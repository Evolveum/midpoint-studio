buildscript {
    repositories {
        maven {
            url 'http://dl.bintray.com/jetbrains/intellij-plugin-service'
        }
    }
}

plugins {
    id "org.jetbrains.intellij" version "0.4.10"
}

group 'com.evolveum.midpoint.studio'
version '4.1-SNAPSHOT'

sourceCompatibility = javaVersion
targetCompatibility = javaVersion

tasks.withType(JavaCompile) { options.encoding = 'UTF-8' }

dependencies {
    compile project(':midpoint-client')

    compile("com.evolveum.midpoint.model:model-common:$midpointVersion") {
        transitive = false
    }
    compile("com.evolveum.midpoint.model:model-api:$midpointVersion") {
        transitive = false
    }
    compile("com.evolveum.midpoint.model:notifications-api:$midpointVersion") {
        transitive = false
    }

    compile "de.slackspace:openkeepass:$openkeepass"
    compile "net.mikehardy:google-analytics-java7:$analyticsVersion"
    compile "org.apache.commons:commons-lang3:$commonsLang"
}

intellij {
    version '2019.1'
    type 'IC'
    downloadSources true
    pluginName 'MidPoint Studio'
    updateSinceUntilBuild false
    plugins = [
            'PsiViewer:191.4212',
            'Groovy',
            'Maven'
    ]
    patchPluginXml {
        sinceBuild '191'
        untilBuild '191.*'
    }
//    publishPlugin {
//        channels System.getenv('IJ_PLUGIN_REPO_CHANNEL')
//        token System.getenv('IJ_REPO_TOKEN')
//    }
}